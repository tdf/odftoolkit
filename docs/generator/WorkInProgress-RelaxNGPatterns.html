<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><!--This file was converted to xhtml by LibreOffice - see https://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">- no title specified</title><meta name="DCTERMS.title" content="" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.creator" content="Hans-Peter Schaal"/><meta name="DCTERMS.issued" content="2009-09-09T17:06:36" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="hanbiao"/><meta name="DCTERMS.modified" content="2011-10-08T18:18:29" scheme="DCTERMS.W3CDTF"/><meta name="xsl:vendor" content="SAXON 9.0.0.7 from Saxonica"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style>
    table { border-collapse:collapse; border-spacing:0; empty-cells:show }
    td, th { vertical-align:top; font-size:12pt;}
    h1, h2, h3, h4, h5, h6 { clear:both;}
    ol, ul { margin:0; padding:0;}
    li { list-style: none; margin:0; padding:0;}
    span.footnodeNumber { padding-right:1em; }
    span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
    span.heading_numbering { margin-right: 0.8rem; }* { margin:0;}
    .Condition_20_Met { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;color:#005480; }
    .Footnote { font-size:10pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;margin-left:0.499cm; margin-right:0cm; text-indent:-0.499cm; }
    .Heading_20_2 { font-size:14pt; margin-bottom:0.212cm; margin-top:0.423cm; font-family:Arial; writing-mode:horizontal-tb; direction:ltr;font-style:italic; font-weight:bold; }
    .Heading_20_3 { font-size:12pt; margin-bottom:0.212cm; margin-top:0.423cm; font-family:Arial; writing-mode:horizontal-tb; direction:ltr;color:#333333; text-decoration:underline; font-weight:bold; }
    .P1 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P10 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P11 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P12 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P13 { font-size:12pt; margin-bottom:0.212cm; margin-top:0cm; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P14 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr; margin-left:0cm; margin-right:0cm; margin-top:0cm; margin-bottom:0cm; line-height:100%; text-align:left ! important; text-indent:0cm; }
    .P2 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P3 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P4 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P5 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P6 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P7 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P8 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .P9 { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .Standard { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;}
    .Text_20_body { font-size:12pt; font-family:'Times New Roman'; writing-mode:horizontal-tb; direction:ltr;margin-top:0cm; margin-bottom:0.212cm; }
    .Bullet_20_Symbols { font-family:OpenSymbol; }
    .T1 { text-decoration:underline; }
    .T2 { text-decoration:underline; font-weight:normal; }
    .T3 { font-style:italic; }
    .T5 { font-family:Arial; font-size:10pt; letter-spacing:normal; font-style:normal; text-shadow:none; text-decoration:none ! important; font-weight:normal; }
    .T6 { color:#000000; font-family:Arial; font-size:10pt; letter-spacing:normal; font-style:normal; text-shadow:none; text-decoration:none ! important; font-weight:normal; }
    /* ODF styles with no properties representable as CSS:
    .Footnote_20_Symbol .NotAGoodIdea .Numbering_20_Symbols  { } */
</style></head><body dir="ltr" style="max-width:21.59cm;margin-top:2cm; margin-bottom:2cm; margin-left:2cm; margin-right:2cm; "><h2 class="Heading_20_2"><a id="a__Patterns"><span/></a>Patterns</h2><p class="Text_20_body"> </p><h3 class="Heading_20_3"><a id="a__RelaxNG-Pattern__Multiple_Definitions_for_one_element"><span/></a>RelaxNG-Pattern: Multiple Definitions for one element</h3><p class="Standard"> </p><p class="Standard">In RelaxNG you can define an element multiple times: (the lines are not indented to express that each line could be somewhere in the RelaxNG tree, not necessarily on the same level)</p><p class="Standard"> </p><ol><li><p class="P1" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">1.</span>...<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">2.</span>&lt;element name=”Y”&gt;…&lt;/element&gt;<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">3.</span>...<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">4.</span>&lt;element name=”Y”&gt;…&lt;/element&gt;<span class="odfLiEnd"/> </p></li><li><p class="P1" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">5.</span>...<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">Imagine we have an element of type Y. How should we decide if the definition in line 2 or the definition in line 4 should apply for this element? To know we might have to go up in the RelaxNG tree, maybe even to the root element.</p><p class="Standard"> </p><p class="Standard">Fortunately at the moment (ODF 1.2 Draft) there is only one element with multiple definitions: “form:list-value”. All definitions are direct subelements of the “form:list-property” element. So we know which definition should apply by looking at the parent element and its attributes.</p><p class="Standard"> </p><div class="Standard">Conclusion: This conclusion is really important for all other patterns: <span class="T2">The definition itself of all elements</span><span class="T2"><span class="Footnote_20_anchor" title="Footnote: An element definition is represented in RelaxNG by &lt;element name=”Y&gt;...&lt;/element&gt; and describes child elements, attributes and attribute values. "><a href="#ftn1" id="body_ftn1">1</a></span></span><span class="T2"> besides “form:list-value” is context-free! The definition for “form:list-value” only depends on its direct parent element and contains only attributes</span>. In details:</div><ul><li><p class="P2" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">–</span>If we look at a <span class="T3">parent element → child element</span> constraint, we can limit our scope to the parent element level: Which child element is always mandatory, always optional or always undefined? Does the parent element need special other child elements, special attributes or special attribute values for the addition of this child element?<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">–</span>If we look at a <span class="T3">element → attributes</span> constraint, we can limit our scope (in the same ways as above) for all elements but “form:list-value” to the element level. The parent elements don't matter for the decision which attributes or attribute values these elements can have.<span class="odfLiEnd"/> </p></li><li><p class="P3" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">–</span>If we look at the <span class="T3">form:list-property → form:list-value attributes</span> constraint, we have to take the attributes and attribute values of “form:list-property” into account to decide over the attributes of “form:list-value”. In other words: An attribute of “form:list-value” doesn't just depend on the other attributes of “form:list-value”, but also on the attributes of “form:list-property”.<span class="odfLiEnd"/> </p></li></ul><p class="Standard"> </p><h3 class="Heading_20_3"><a id="a__RelaxNG-Pattern__GROUP_depending_on_value_of_one_attribute_group_member"><span/></a>RelaxNG-Pattern: GROUP depending on value of one attribute group member</h3><p class="Standard"> </p><ol><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">1.</span>&lt;element ..&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">2.</span>   &lt;group&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">3.</span>    &lt;attribute ...&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">4.</span>      &lt;value&gt;...&lt;/value&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">5.</span>    &lt;/attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">6.</span>    &lt;element or attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">7.</span>  &lt;/group&gt;<span class="odfLiEnd"/> </p></li><li><p class="P4" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">8.</span>&lt;/element&gt;<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">Example: An element with an attribute which defines the possible child elements.</p><p class="Standard"> </p><p class="Condition_20_Met"><span> &lt;element name="style:style"&gt;</span></p><p class="Standard"><span> </span><span> &lt;choice&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span>  &lt;group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;attribute name="style:family"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;text&lt;/value&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;optional&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;element name="style:text-properties"&gt;...&lt;/element&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/optional&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;/group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> ...</span></p><p class="Standard"><span> </span><span> &lt;/choice&gt;</span></p><p class="Condition_20_Met"><span> &lt;/element&gt;</span></p><p class="Standard"> </p><p class="Standard">Example: The same, but harder to find because of  elements between element and condition.</p><p class="Standard"> </p><p class="Condition_20_Met"><span> &lt;element name="style:chart-properties"&gt;</span></p><p class="Standard"><span> </span><span> &lt;interleave&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;optional&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;attribute name="chart:scale-text"&gt;...&lt;/attribute&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/optional&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> ...</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;attribute name="chart:symbol-type"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;image&lt;/value&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;element name="chart:symbol-image"&gt;...&lt;/element&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/group&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/choice&gt;</span></p><p class="Standard"><span> </span><span> &lt;/interleave&gt;</span></p><p class="Condition_20_Met"><span> &lt;/element&gt;</span></p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard"> </p><p class="Standard">Example: An example for an attribute which defines a possible other attribute.</p><p class="Standard"> </p><p class="Condition_20_Met"><span> &lt;element name="text:section"&gt;</span></p><p class="Standard"><span> </span><span> &lt;choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;attribute name="text:display"&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;true&lt;/value&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;none&lt;/value&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;/choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;attribute name="text:display"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;condition&lt;/value&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;attribute name="text:condition"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;ref name="string"/&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;/group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;empty/&gt;</span></p><p class="Standard"><span> </span><span> &lt;/choice&gt;</span></p><p class="Standard"><span> &lt;/element&gt;</span></p><p class="Standard"> </p><p class="Standard">Example: The same attributes have a different logic in another element:</p><p class="Standard"> </p><p class="Condition_20_Met"><span> &lt;element name="style:text-properties"&gt;</span></p><p class="Standard"><span> </span><span> &lt;choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;attribute name="text:display"&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;value&gt;true&lt;/value&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;attribute name="text:display"&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;value&gt;none&lt;/value&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;group&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;attribute name="text:display"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;condition&lt;/value&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;attribute name="text:condition"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> </span><span> &lt;value&gt;none&lt;/value&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> </span><span> &lt;/attribute&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;/group&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;empty/&gt;</span></p><p class="Standard"><span> </span><span> &lt;/choice&gt;</span></p><p class="Condition_20_Met"><span> &lt;/element&gt;</span></p><p class="Standard"> </p><p class="Standard">Detected Rules:</p><ol><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">1.</span>An attribute X with value Y might make it necessary to insert a special child element<span class="odfLiEnd"/> </p></li><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">2.</span>A special child element might make it necessary to define an attribute X with value Y<span class="odfLiEnd"/> </p></li><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">3.</span>An attribute X with value Y might make it necessary to define another attribute Z<span class="odfLiEnd"/> </p></li><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">4.</span>The existence of an attribute Z might make it necessary to define an attribute X with value Y.<span class="odfLiEnd"/> </p></li><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">5.</span>An attribute A with value X might make it necessary to define an attribute B with value Y. <span class="odfLiEnd"/> </p></li><li><p class="P5" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">6.</span>I didn't find an example where a special child element makes it necessary to define another special child element. → so let's ignore this and we can always assume Attr-&gt;Element, Element-&gt;Attr or Attr-&gt;Attr dependencies.<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">Conclusion:</p><ul><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>To decide whether an element or attribute is allowed, we have to look at the parent element<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Theoretically attribute's value pattern could include multiple values or even regex. But I didn't find such an example, only single fix values. So let's limit this pattern to this easy case!<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>This is about choice between groups. So this is similar to the choice pattern below.<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know whether an element or attribute class is defined as possible child. Possible as in “under some circumstances”.<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know whether there are conflicts with existing child elements or attributes before inserting the new child element/attribute. If this is about a new attribute, the user has to set its value <span class="T1">before</span> calling this functionality as the result may depend on it.<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might want functionality to remove all conflicting attributes or child elements before inserting the new child element or attribute. However if the new child has its own dependencies, those cannot be automatically created. We're assuming: If somebody uses the removal of conflicting elements, he/she is going to provide all replacements, i.e. the new child <span class="T1">and</span> all of its dependencies like other child element or attributes.<span class="odfLiEnd"/> </p></li><li><p class="P6" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might want to know whether all dependencies of a child element or attribute are met or whether further steps are needed. It's unclear whether it's better to check this for an already inserted or for a not yet inserted child element/attribute.<span class="odfLiEnd"/> </p></li></ul><p class="Standard"><span> </span></p><h3 class="Heading_20_3"><a id="a__RelaxNG_Pattern__Mandatory_attribute_or_child_element"><span/></a>RelaxNG Pattern: Mandatory attribute or child element</h3><p class="Standard"> </p><ol><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">1.</span>&lt;element&gt;<span class="odfLiEnd"/> </p></li><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">2.</span>    … (but no OPTIONAL tag!)<span class="odfLiEnd"/> </p></li><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">3.</span>    &lt;element or attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">4.</span>    &lt;/element or attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">5.</span>    ...<span class="odfLiEnd"/> </p></li><li><p class="P7" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">6.</span>&lt;element&gt;<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">Conclusion:</p><ul><li><p class="P8" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested in getting a list of all mandatory attributes and child elements<span class="odfLiEnd"/> </p></li><li><p class="P8" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know whether an element has all mandatory attributes and child elements set.<span class="odfLiEnd"/> </p></li><li><p class="P8" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested in a list of all mandatory attributes and child element which are missing.<span class="odfLiEnd"/> </p></li></ul><p class="Standard"> </p><h3 class="Heading_20_3"><a id="a__RelaxNG_Pattern__Attribute_or_cardinality_of_child_elements"><span/></a>RelaxNG Pattern: Attribute or cardinality of child elements</h3><p class="Standard"> </p><ol><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">1.</span>&lt;element&gt;<span class="odfLiEnd"/> </p></li><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">2.</span>  … (ZEROORMORE, ONEORMORE, OPTIONAL or no tags)<span class="odfLiEnd"/> </p></li><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">3.</span>  &lt;element or attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">4.</span>  &lt;/element or attribute&gt;<span class="odfLiEnd"/> </p></li><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">5.</span>  ...<span class="odfLiEnd"/> </p></li><li><p class="P9" style="margin-left:0cm;"><span class="Numbering_20_Symbols" style="display:block;float:left;min-width:0cm;">6.</span>&lt;/element&gt;<span class="odfLiEnd"/> </p></li></ol><p class="Standard"> </p><p class="Standard">Conclusion:</p><ul><li><p class="P10" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>An attribute is always a singleton. No second attribute child node by this name should be created.<span class="odfLiEnd"/> </p></li></ul><ul><li><p class="P11" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know whether an attribute child node has already been set. A getOrCreateAttributeNode method would be useful.<span class="odfLiEnd"/> </p></li><li><p class="P11" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know the allowed cardinality of child elements (0, 1, 0-1, 0-unlimited, 1-unlimited) and whether a child element by this name has already been set.<span class="odfLiEnd"/> </p></li></ul><p class="Standard"> </p><h3 class="Heading_20_3"><a id="a__RelaxNG_Pattern__Choice_as_exclusive_alternative"><span/></a>RelaxNG Pattern: Choice as exclusive alternative</h3><p class="Text_20_body"> </p><p class="Standard">Example: Exclusive alternative</p><p class="Standard"> </p><p class="Standard"><span> &lt;element name="office:body"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> &lt;choice&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;element name="office:text"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> &lt;element name="office:drawing"&gt;</span></p><p class="Condition_20_Met"><span> </span><span> </span><span> …</span></p><p class="Condition_20_Met"><span> </span><span> &lt;/choice&gt;</span></p><p class="Standard"><span> &lt;/element&gt;</span></p><p class="Standard"> </p><p class="Standard">Open question for overlapping choices: Every example for overlapping choices like a choice between Group A and Group B with common elements could be transformed. Given an always set Group C (common elements of A and B) it can be transformed into a choice between A\C and B\C. So there should be no such example and I couldn't find one.</p><p class="Standard"> </p><p class="Standard">Example: Defining lists (since it's of no interest, I didn't transform it into simple syntax)</p><p class="Standard"> </p><p class="Standard"><span> &lt;define name="config-items"&gt;</span></p><p class="Standard"><span> </span><span> &lt;oneOrMore&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;choice&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;ref name="config-config-item"/&gt;</span></p><p class="Standard"><span> </span><span> </span><span> </span><span> &lt;ref name="config-config-item-set"/&gt;</span></p><p class="Standard"><span> </span><span> </span><span> &lt;/choice&gt;</span></p><p class="Standard"><span> </span><span> &lt;/oneOrMore&gt;</span></p><p class="Standard"><span> &lt;/define&gt;</span></p><p class="Standard"> </p><p class="Standard">Conclusion: </p><ul><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>The choice tag can be used for defining element lists like {A,B,C}*. We're not considering them real choices.<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Theoretically you could choose between overlapping sets. Since it's a bad thing for the reader of the ODF Spec to formulate choices like this, we should treat this like a bug in the Spec. I couldn't find such an example.<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>We're interested in real – exclusive – choices.<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>The existence of one child element/attribute from set A conflicts with the existence of one child element/attribute from set B. Same for C, D, E, ...<span class="odfLiEnd"/> </p></li><li><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>A user might be interested to know whether an element / attribute conflicts with existing child elements / child attributes before inserting it. It's the same as with the GROUP depending on an attribute's value or child element as above.<span class="odfLiEnd"/> </p><p class="P12" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm"><!-- --></span><span class="odfLiEnd"/> </p></li></ul><h2 class="Heading_20_2"><a id="a__Common_results___Methods_extracted_"><span/></a>Common results – Methods extracted:</h2><ul><li><div class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Get allowed Cardinality of child element by tag name <span class="NotAGoodIdea">or DOM class name</span><span class="NotAGoodIdea"><span xmlns="" title="annotation" class="annotation_style_by_filter"><br/>[ANNOTATION:<br/><br/><span title="dc:creator">BY 'Hans-Peter Schaal'</span><br/><span title="dc:date">ON '2009-09-10T12:22:44'</span><br/><span>NOTE: '<span xmlns="http://www.w3.org/1999/xhtml" class="T5">A user can create raw DOM elements / attributes. Those are Node objects, but not Odfdom objects, </span><span xmlns="http://www.w3.org/1999/xhtml" class="T6">even if they have the same tag name.</span>'</span>]</span></span>. Further convenience methods are possible like isMandatory, isOptional, isSingleton. This should be done on an existing parent object, since the answer may depend on the parent's attributes values.<span class="odfLiEnd"/> </div></li><li><div class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Check existence of an attribute child node or child element by tag name <span class="NotAGoodIdea">or DOM class name</span><span class="NotAGoodIdea"><span xmlns="" title="annotation" class="annotation_style_by_filter"><br/>[ANNOTATION:<br/><br/><span title="dc:creator">BY 'Hans-Peter Schaal'</span><br/><span title="dc:date">ON '2009-09-10T12:24:15'</span><br/><span>NOTE: '<span xmlns="http://www.w3.org/1999/xhtml" class="T6">A user can create raw DOM elements / attributes. Those are Node objects, but not Odfdom objects, even if they have the same tag name.</span>'</span>]</span></span>. Further convenience methods to avoid violating the singleton constraint are possible like getOrCreate...<span class="odfLiEnd"/> </div></li><li><p class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Check whether an attribute or child node is a <span class="T1">possible</span> child of a given parent element. Possible as “under some circumstances”. This is the only thing the RelaxNG2Template Codegen can do now. To make it clear that this does not depend on the parent instance but only the tag name, we should put this method as static method into OdfElement only with parent and child tag names as parameters.<span class="odfLiEnd"/> </p></li><li><p class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Check whether a to be inserted attribute (value provided!) or element conflicts with already existing child elements/attributes.<span class="odfLiEnd"/> </p></li><li><p class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Functionality to remove all conflicting attributes / child elements for a to be inserted attribute (value provided!) or element. Note that dependencies for the insertion will not be created, it's just to make tabula rasa.<span class="odfLiEnd"/> </p></li><li><div class="P13" style="margin-left:0cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0cm;">•</span>Check whether all dependencies are met for a child element<span xmlns="" title="annotation" class="annotation_style_by_filter"><br/>[ANNOTATION:<br/><br/><span title="dc:creator">BY 'Hans-Peter Schaal'</span><br/><span title="dc:date">ON '2009-09-10T12:45:06'</span><br/><span>NOTE: '<span xmlns="http://www.w3.org/1999/xhtml" class="T5">Existing or to be added child element?</span>'</span>]</span> or whether attributes and elements are to be added to the parent element. The answer might be Boolean since it's difficult to provide a list with attributes which have values provided or a list of alternatives (imagine: style:text-properties → parent attribute style:family is missing. But which attribute value?).<span class="odfLiEnd"/> </div></li></ul><p class="Footnote"><span class="footnodeNumber"><a class="Footnote_20_Symbol" id="ftn1" href="#body_ftn1">1</a></span>An element definition is represented in RelaxNG by &lt;element name=”Y&gt;...&lt;/element&gt; and describes child elements, attributes and attribute values. </p><script type="text/javascript" src="https://oasis-tcs.github.io/odf-tc/odf1.3/styles/mml-svg.js"><!--Because browsers are utterly terrible, here is a comment to force a script end tag to be generated from XSLT so you don't see a blank page--></script></body></html>